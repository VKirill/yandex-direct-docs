---
source: https://yandex.ru/support/direct/ru/technologies-and-services/iab-compliance
---


# Соответствие стандартам IAB

- [Подсчет показов](../technologies-and-services/iab-compliance.md#shows)
- [Подсчет кликов](../technologies-and-services/iab-compliance.md#clicks)
- [Видимость](../technologies-and-services/iab-compliance.md#viewability)
- [Реклама на мобильных](../technologies-and-services/iab-compliance.md#mobile)
- [Реклама в приложениях](../technologies-and-services/iab-compliance.md#app)
- [Защита от фрода](../technologies-and-services/iab-compliance.md#fraud)

Яндекс стремится к тому, чтобы рекламодатели платили только за реальные показы и клики. Для медийной рекламы применяются общепринятые в индустрии методы и технологии, одобренные международной Ассоциацией развития интерактивной рекламы (IAB). Они используются для всех без исключения мест показа медийной рекламы и работают как на собственных проектах, так и на партнерских площадках Рекламной сети.

## Подсчет показов

Основные принципы подсчета показов рекламы в Яндексе:

- Показ засчитывается при достижении заданных параметров видимости по стандарту MRC — минимум 50% площади баннера находится в активном окне браузера не менее 1 секунды.
- Доставка рекламы и трекинговой ссылки для отслеживания показа инициируется исключительно пользователем: загрузка рекламного контента идет по HTTP-запросу пользователя из его браузера.
- Подсчет показов происходит после загрузки рекламы на странице браузера.

**Автообновление**

:   [Правила участия в Рекламной сети Яндекса](https://yandex.ru/legal/partner/) разрешают автообновление не чаще одного раза в 30 секунд.

    Яндекс отслеживает выполнение этого пункта площадками — в запросе указывается специальный признак `impressionoptions_refresh`. Мы постоянно следим за долей автообновлений, разрешенных Правилами, на площадках — она несущественна.

    Проверка трафика площадок на выполнение условий по автообновлению проходит раз в квартал. Если площадка злоупотребляет автообновлением, к ней применяются меры административного воздействия.

**Prefetch**

:   Показы объявлений на предварительно подготовленных страницах не учитываются. Предотвращение prefetch на площадке партнера:

    1. Вызов рекламы осуществляется по составной ссылке, часть которой вызывается только после отработки специального js-кода.
    2. Настройка правил в системе антифрода и их мониторинг.

**Контроль кэширования**

:   Чтобы не допустить кэширования в заголовках, в запросах и ответах используются специальные заголовки: `cache-control: no-cache`, `pragma: no-cache`.

    Чтобы не допустить кэширования ссылки, которая формируется при клике на рекламное объявление, используется специальный механизм. Ссылка создается с помощью динамических параметров: идентификаторов заказа, события, баннера, типа счетчика и других. Далее, из соображений безопасности, все параметры ссылки хешируются и ссылка отдается в закодированном виде.

## Подсчет кликов

На схеме ниже показан процесс учета кликов:

Пользователь инициирует клик по рекламному баннеру, содержащему трекинговую ссылку вида `https://an.yandex.ru/count/[crypted-data]`. В `[crypted-data]` закодирована информация, которая позволяет определить, к какому баннеру относится ссылка и на какой площадке произошел клик (эта же ссылка используется для подсчета показов баннера).

Информация из ссылки передается во внутреннюю систему, где засчитывается клик по баннеру и определяется ссылка для перенаправления на сайт рекламодателя. Пользователь переходит на сайт рекламодателя, указанный при настройке рекламной кампании.

Точность подсчета кликов обеспечивается следующим:

- подсчет кликов осуществляется во внутренней системе до перенаправления пользователя на сайт рекламодателя;
- к размещению в Директе не допускаются рекламные объявления, ссылки на сайт с которых содержат больше 5 редиректов, подробнее в [Требованиях к рекламным материалам](https://yandex.ru/legal/banner_adv_rules/);
- клик вне области рекламного баннера не фиксируется и не учитывается при подсчете количества кликов;
- клик не учитывается, если пользователь вернулся с сайта рекламодателя на страницу с рекламой слишком быстро (временной интервал подбирается с помощью машинного обучения и устанавливается для каждой платформы отдельно).

**Дублирующиеся клики**

:   Если во время показа рекламного объявления было несколько кликов, то в статистике засчитывается только один клик.

**Валидация кликов**

:   Для валидации кликов используется общий механизм работы с данными в истории. Если с момента последнего действия пользователя прошло более 24 часов, все данные для технических фильтров удаляются из истории.

    Для валидации кликов механизм используется следующим образом: если между показом рекламного объявления и кликом по нему прошло более 24 часов, клик считается невалидным и не учитывается.

    Если для провалидированных кликов нет показов, которые прошли проверку системой антифрода, клики не засчитываются.

## Видимость

#### Баннерная реклама

Для медийных баннеров Яндекс применяет технологию учета видимости по стандарту MRC — 50% площади баннера находится в активном окне браузера непрерывно в течение 1 секунды.

Для медийных объявлений большого размера (больше 242 500 пикселей) показ засчитывается, если 30% объявления находится в активном окне браузера непрерывно не менее 1 секунды.

Яндекс проводит измерение видимости по фактическому размеру баннера, а не по размеру блока, в котором он показывается. Объявление для размещения подбирается по размеру контейнера, то есть размер контейнера и размер объявления всегда совпадают.

Видимость проверяется в процессе отслеживания показа объявления.

После загрузки баннера на страницу для статистики отслеживаются события:

- отрисовка баннера на странице;
- видимость баннера.

Если баннер отрисован на странице, но данных о видимости не поступило, показ считается невидимым. Если показ засчитан как видимый, то данные об отрисовке не засчитываются.

Учет видимых и невидимых показов в статистике происходит после записи событий и обработки системой антифрода.

#### Видеореклама

Показ видеорекламы засчитывается, если не менее 50% плеера находится в зоне видимости пользователя не менее 2 секунд. При этом в [Правилах участия](https://yandex.ru/legal/partner/) указаны минимально допустимые размеры для плеера — 320 × 180 пикселей или 180 × 320 пикселей. Показы в плеерах меньшего размера не будут засчитываться. Если размер плеера по какой-либо причине не удастся определить, то показы не будет учтены.

Для корректного учета видимости при показе видеорекламы партнер Яндекса должен использовать одну из схем интеграции:

- плеер с поддержкой стандарта видеорекламы **VAST (Video Ad Serving Template) версии 2.0/3.0**;
- **Video SDK Яндекса** — библиотека, которая интегрируется в плеер партнера и с помощью которой в плеере реализуется поддержка VAST.

Т. е. для корректного отображения рекламных блоков площадка должна поддерживать стандарт VPAID/MRAID.

Яндекс проводит измерение видимости на базе слота плеера. Видеореклама для размещения подбирается по размеру слота, то есть размер контейнера и размер объявления всегда совпадают.

#### Критерии видимости и порядок проверки видимости

Видимость рекламного объявления проверяется на основе следующих критериев:

1. Вкладка в браузере должна быть активной.
2. Рекламное объявление должно находиться во viewport (*viewport* — видимая область веб-страницы, которую может увидеть пользователь, не прибегая к прокрутке) не менее 1 секунды по стандарту MRC. Более 30% площади для больших блоков (больше 242500 пикселей) и более 50% площади для обычных блоков (меньше 242500 пикселей) должны находиться во viewport.
3. Средняя точка не должна быть перекрыта.

Проверка по критериям видимости проходит в следующем порядке:

1. Проверка активной вкладки.
2. Проверка доли во viewport через [IntersectionObserver](https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API).
3. Перекрытие средней точки.

**Prefetch**

:   Показы объявлений на предварительно подготовленных страницах не учитываются.

**Обработка кросс-доменных iframes**

:   Для измерения видимости используется метод [IntersectionObserver](https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API), в том числе если в процессе вызова рекламы задействованы кросс-доменные iframes.

**Контроль кэширования**

:   Чтобы не допустить кэширования, используются те же методы, что и для показов.

**Отслеживание показа множественных рекламных объявлений**

:   В Яндексе одному уникальному показу может соответствовать только одно рекламное объявление.

## Реклама на мобильных

Процессы доставки контента, подсчета показов и кликов на мобильных устройствах, процедуры и политики работы с авторефрешем и prefetch аналогичны тем, которые используются для веб-сайтов.

Примечание

Показ видеорекламы на мобильных устройствах засчитывается, только если размер видеоплеера составляет не менее 300 × 160 или 160 × 300 dp (density-independent pixels). При подборе рекламы учитывается соотношение сторон рекламного блока.

Клик по рекламе на мобильных устройствах не учитывается, если пользователь вернулся с сайта рекламодателя на страницу с рекламой слишком быстро. Временной интервал подбирается с помощью машинного обучения и устанавливается для каждой платформы отдельно.

## Реклама в приложениях

Показ рекламы Яндекса в приложениях осуществляется с помощью MobileAds SDK — набора библиотек для использования материалов Рекламной Сети Яндекса (РСЯ) в мобильных приложениях. Подробнее о MobileAds SDK смотрите в [документации](https://tech.yandex.com/mobile-ads/doc/intro/about-docpage/).

Ниже представлена последовательность действий для подтверждения видимости рекламы:

1. Реклама загружается.
2. Реклама добавляется на экран или вызывается в методе `show`.
3. SDK начинает проверку видимости рекламы. Последовательно проверяются следующие факторы:

   1. процент видимости рекламы (Visibility Percent);
   2. интервал, в течение которого реклама должна быть в зоне видимости (Shownotice Delay).
4. Если реклама не прошла первую проверку, то запускается таймер, который с интервалом в 0.2 секунды проверяет Visibility Percent.
5. В случае успешной проверки Visibility Percent, через Shownotice Delay производится повторная проверка видимости на тот же процент.
6. В случае успешной проверки таймер останавливается, и SDK отправляет запрос по ссылке подтверждения видимости. Иначе проверка начинается заново. Если в течение 60 секунд подтверждение не было отправлено, показ рекламы не будет засчитан.

Сведения о свойствах устройства и платформы SDK получает из системного API, предоставляемого iOS и Android: рекламный идентификатор, локацию, если ее определение разрешено в приложении и в SDK, свойства экрана устройства.

**Ограничения для различных версий ОС**

:   При запросе рекламы передается версия платформы. В зависимости от платформы существуют различные ограничения:

    Ограничения для Android

    Ограничения для iOS

    Минимальная поддерживаемая версия — Android 2.3.3. Видеореклама подбирается только на устройства с версией Android 5.0 и выше.

    1. Для загрузки любого вида рекламы необходима версия iOS 8.0 и выше.
    2. Видеореклама подбирается только на устройства с версией iOS 10.0 и выше.

**Проверка состояния работы приложения**

:   Проверка видимости рекламы и подсчет показов осуществляются, только если выполняются следующие условия:

    для Android

    для iOS

    - приложение активно, т. е. экран устройства разблокирован;
    - приложение запущено не в фоновом режиме;
    - реклама показывается в активном окне приложения.

    - приложение активно, т. е. находится в состоянии Active, а не Inactive или Background;
    - реклама показывается в активном окне приложения.

    Показы также засчитываются, если приложение было запущено на эмуляторе или симуляторе и были выполнены условия выше.

**Авторефреш, prefetch**

:   Процедуры и политики работы с авторефрешем и prefetch аналогичны тем, которые используются для веб-сайтов.

## Защита от фрода

Для удаления невалидного трафика (IVT) используется лог, размеченный антифродом. Для формирования статистики берутся данные, которые прошли проверку системой антифрода.

Основные источники выявления невалидного трафика:

- система мониторинга;
- жалобы рекламодателей и владельцев площадок РСЯ;
- регулярный анализ рынка услуг по генерации IVT;
- поиск паттернов;
- расширение известных типов IVT.

Рекламные события, сделанные сотрудниками Яндекса из внутренней сети, не засчитываются в статистике.

Система рекламного антифрода защищает РСЯ от общего и нестандартного IVT. Они отфильтровываются с помощью следующих методов:

**Общий**

:   - техническая фильтрация;
    - фильтрация внутреннего трафика. Осуществляется через общий список диапазонов IP-адресов (диапазоны адресов датацентров Яндекса и диапазоны адресов внутренних пользовательских сетей Яндекса);
    - фильтрация примитивных роботов. Осуществляется через валидацию User-Agent по спискам, IP-адреса, подписи ссылок, валидацию cookie пользователя и referer.

**Нестандартный**

:   - эвристические правила;
    - машиннообученные правила;
    - модели машинного обучения;
    - кластеризация и другие методы.

Система рекламного антифрода активно обменивается статистиками с другими системами антифрода Яндекса и переиспользует эти данные.

**Предварительная подготовка площадок, анализ накопленных данных**

:   К Рекламной сети Яндекса могут быть подключены только те ресурсы, которые удовлетворяют [Правилам](https://yandex.com/legal/partner_ch/) и [Условиями участия в РСЯ](https://yandex.com/legal/oferta_yan_ch/). Политика SSP по отношению к ресурсам, не должна нарушать вышеуказанных требований. Каждая добавленная площадка или SSP проверяется службой модерации Яндекса.

    Новые площадки некоторое время работают в тестовом режиме: их трафик изучается и проверяется дежурным аналитиком и системой антифрода. Данные по этим площадкам не учитываются в статистике для рекламодателей, средства за показы на этих площадках не списываются.

    Все новые площадки проверяются на конверсионность. Те площадки, которые регулярно приводят фродовый или неконверсионный трафик, отключаются от РСЯ.

    Для выявления новых типов IVT используются:

    - система мониторинга, следящая за отклонениями в трафике;
    - различные методы кластеризации трафика и площадок;
    - анализ жалоб рекламодателей;
    - сигналы смежных систем антифрода.

**Обнаружение IVT на основе списков или параметров**

:   Система использует таблицы со списком диапазонов IP-адресов, с которых наблюдалось большое количество фродового трафика. С помощью опций можно:

    - настроить отправку событий с этих адресов в отдельный лог, события из которого нигде не учитываются;
    - помечать события с этих адресов специальным флагом и отправлять в основную систему антифрода, которая разметит их как подозрительные.

    Также система использует таблицу с регулярными выражениями для обнаружения подозрительных User Agents. User Agent должен подходить хотя бы под одно регулярное выражение из списка допустимых и не подходить ни под одно из списка подозрительных. С помощью специальных флагов можно настроить отправку подозрительных событий в отдельный лог, и они не будут принимать участия в дальнейшей обработке.

**Фальсификация видимых показов**

:   Поскольку только показы с подтвержденной видимостью учитываются в статистике и оплачиваются рекламодателями, правила и инструменты антифрода применяются именно к видимым показам.

    Расходы на фрод автоматически возвращаются на баланс рекламодателя, а отфильтрованные показы и клики удаляются из всех отчетов статистики.
